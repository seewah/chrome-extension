<link rel="stylesheet" href="styles/main.css" type="text/css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script>
	$(function() {
		var searchBoxInitialText = 'Search papers...';
		var searchBox = $('#search-box input');
		searchBox.val(searchBoxInitialText);
		searchBox.focus(function() {
			searchBox.val('');
			searchBox.addClass('focus');
		});		
		searchBox.blur(function() {
			if(searchBox.val() == '') {
				searchBox.val(searchBoxInitialText);
			}
			searchBox.removeClass('focus');
		});
		$('#search form').submit(function(e) {
			var props = new Object();
			var queryString = searchBox.val();
			if(queryString == searchBoxInitialText) {
				queryString = '';
			}
			props.url = 'http://www.mendeley.com/research-papers/search/?query=' + encodeURIComponent(queryString);
			chrome.tabs.create(props);
			e.preventDefault();
		});
		$('.site-link').live('click', function() {			
			chrome.tabs.create({'url':$(this).attr('href')});
			e.preventDefault();
		});
		if(chrome.extension.getBackgroundPage().loggedIn) {
			$('#logged-out').hide();
			chrome.extension.getBackgroundPage().renderFeed($('#feed-items'));
		}
		else {
			$('#logged-in').hide();
		}
	});
</script>

<body>
	<div id="search">
		<form>
			<div id="search-box">
				<input type="text" value="Search papers..."></input>
			</div>
			<button class="search-btn" type="submit">Search</button>
		</form>
	</div>
	<div id="logged-out">
		<div id="login-prompt">
			<a href="https://www.mendeley.com/login/" class="site-link">Log in</a> now for instant update of your Mendeley newsfeed
		</div>
	</div>
	<div id="logged-in">		
		<a href="http://www.mendeley.com/" class="site-link">Go to Mendeley dashboard</a>
		<div id="feed-items"></div>		
		<a href="http://www.mendeley.com/" class="site-link">Go to Mendeley dashboard</a>
	</div>
</body>